---
layout: default
title: Intro to rails
description: Intro to rails
---


<h1 class="doc_title">Intro To Rails</h1>
<div class="doc">
    <div class="message">
        <h3>Goal</h3>

        <p>To teach you Ruby on Rails we are going to use a "Real World"
            example. You've decided to create a voting system for you and your
            friends to play with. You've decided at a minimum, you'd like to
            allow users to:</p>

        <ul>
            <li>view the topics sorted by number of votes</li>
            <li>vote on topics</li>
            <li>create, edit, and destroy topics</li>
        </ul>

        <p>You've sketched up an initial screenshot of what you want it to look like:</p>

        <p><img class="screenshot" src="img/finished_app.png" alt="Browser window with topic titles that can be voted on, ordered by number of votes"></p>

        <h3>Meta-Goal</h3>

        <p>When you have completed today's goal of getting the basic
            application online you should understand:</p>

        <ul>
            <li>Basic Ruby syntax</li>
            <li>How to try your Ruby code (irb)</li>
            <li>How to go from requirements to a new working Rails application</li>
            <li>How to get your application online</li>
            <li>The basic tools a RoR developer uses (source control, editor, console, local server)</li>
        </ul>

        <h3>Requirements</h3>

        <p>To get through this course, you'll need a free Github account.</p>

        <p>
            <a href="https://github.com/signup" target="_blank">Create a free Github account</a> by filling the signup form.<br>
            <img class="screenshot" src="img/codespaces1.png" />
        </p>
        <p>
            On the next screen, you can click "skip personalization" on the bottom to continue.<br>
            <img class="screenshot" src="img/codespaces2.png" />
        </p>

        <p>
            Once you are signed into Github, you'll need to create a <strong>repository</strong> - a new programming project. <br><br>
            To do that,
            <a href="https://github.com/railsbridge-boston/start/generate" target="_blank">Create a new repository</a> from the Railsbridge template.
            You can pick any name you like, or accept the default suggestion. You can also decide if you want your code to be public
            for anyone to see, or private. <br><br>Leave the "Include all branches" option unchecked, then click <strong>Create repository</strong>.<br>
            <img class="screenshot" src="img/codespaces5.png" />
        </p>
        <p>
            It may take a moment for your repository to be generated.<br>
            <img class="screenshot" src="img/codespaces6.png" />
        </p>
        <p>
            When it's finished, you'll be taken to a page that looks like this. Click on the green <strong>Code</strong> button,
            then click <strong>Create codespace on main</strong>. This will be our code editor.<br>
            <img class="screenshot" src="img/codespaces7.png" />
        </p>
        <p>
            This will begin setting up the editor in your browser. It may take a minute or two.<br>
            <img class="screenshot" src="img/codespaces8.png" />
        </p>
        <p>
            The editor will automatically set up like this once it's ready.<br>
            <img class="screenshot" src="img/codespaces9.png" />
        </p>

        <p>
            Congratulations! You're ready to start coding.
        </p>
    </div>

    <div class="message">
        <h1>Working Effectively and Efficiently</h1>

        <p>We highly recommend you do the following:</p>

        <ul>
            <li>In your codespace you will want to open 2 terminal tabs:
                <ul>
                    <li>One is for regular terminal stuff</li>
                    <li>One will be for the Rails console. We'll explain later.</li>
                </ul>
                To do this:
                <ul>
                    <li>Click the "+" icon highlighted here: <br><img class="screenshot" src="img/terminal-tabs1.png" /></li>
                    <li>This will create a new terminal tab, and open a panel where you can switch between them: <br><img class="screenshot" src="img/terminal-tabs2.png" /></li>
                </ul>
                If you accidentally close your terminal, you can bring it back with <strong>Ctrl + `</strong>. On most keyboards the ` key is the key above Tab, and below Esc.
            </li>
            <li>Open your browser fresh or hide any windows you already have open.
                <ul>
                    <li>Bring up one window with two tabs.</li>
                    <li>One for this content.</li>
                    <li>One for interacting with your app.</li>
                </ul>
            </li>
            <li>Hide all extra applications. Turn off Twitter, IM, and all other distractions.</li>
        </ul>

        <p>By minimizing the number of things you interact with, you reduce the
            amount of time spent switching between them and the context lost as
            you work through the lessons. Having 50 tabs open in your web
            browser gets confusing and wastes time.</p>
    </div>
    <div class="message">
        <h3>Format</h3>

        <p>Each lesson will look like this:</p>

        <div style="background: white; border: 1px solid black; padding-left: 4em;">
            <h1 class="doc_title" style="margin-top: 0em;">Step Title</h1>
            <div class="goals">
                <h2>Goal:</h2>
                <p>Description of the current step.
                </p>
            </div>
            <div class="steps">
                <h2>Steps:</h2>
                <pre class="term">steps to take.</pre>
                <div class="console irb">
                    <div class="wrapper">
                        <span class="label">IRB</span>
                        <pre>
def code_to_write
  1 + 1
end</pre>
                    </div>
                </div>
            </div>
            <div class="explanation">
                <h2>Explanation</h2>
                <p>Details of what the steps actually did... spell out the cause and effect.
                </p>
            </div>
        </div>
    </div>
</div>

<h1 class="doc_title">Ruby Language</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <ul>
            <li>
                <div class="message">
                    <p>Be able to use the basic building blocks of Ruby code</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Use IRB to run Ruby code</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Do simple calculations</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Use and understand variables</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Use and understand arrays</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Use loops and conditional statements</p>
                </div>
            </li>
        </ul>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Starting interactive ruby</h3>
                <blockquote>
                    <div class="message">
                        <p>Type this in the terminal to start the Interactive Ruby Shell, a program which lets you try out Ruby code:</p>
                    </div>
                    <div class="console terminal">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>irb</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>Yours might look different, but it should look something like this:</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>irb(main):001:0&gt; </pre>
                        </div>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Ruby math</h3>
                <blockquote>
                    <div class="message">
                        <p>Next try some simple math that's built into Ruby. Type these lines into IRB:</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>3 + 3
7 * 6
</pre>
                        </div>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Using variables</h3>
                <blockquote>
                    <div class="console irb">
                        <div class="message">
                            <p><strong>Variables</strong> are names with values assigned to them.</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_variable = 5</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>This assigns the value <code>5</code> to the name <code>my_variable</code>.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Using variables in math</h3>
                <blockquote>
                    <div class="console irb">
                        <div class="message">
                            <p>You can also do math with variables:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_variable + 2
my_variable * 3
</pre>
                        </div>
                        <div class="message">
                            <p>Try a few math operations yourself and see if you can correctly predict the output.</p>
                        </div>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Using arrays</h3>
                <blockquote>
                    <div class="message">
                        <p>Variables can also hold more than one value. This is called an <strong>array</strong>. Think of an array like a list of values.</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>fruits = ["kiwi", "strawberry", "plum"]
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>Here we're using the variable <code>fruits</code> to hold a collection of fruit names.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Array operators</h3>
                <blockquote>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>fruits = fruits + ["orange"]
fruits = fruits - ["kiwi"]
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>
                            <code>+</code> and <code>-</code> are called operators.
                            We can use them with to <em>combine</em> or <em>difference</em> two arrays, just like we can use them to <em>add</em> or <em>subtract</em> two numbers.
                            Try adding another fruit (like bananas?) to the array!
                        </p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Ruby classes</h3>
                <blockquote>
                    <div class="console irb">
                        <div class="message">
                            <p>Everything in Ruby has a <strong>class</strong>. A class is - roughly - a blueprint that tells you what type of data it holds and how it can be used. Type this into IRB:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>7.class
"kiwi".class
fruits.class
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>These are the three classes introduced so far: <strong>Integer</strong> (numbers), <strong>String</strong> (text), and <strong>Array</strong> (lists).</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Ruby methods</h3>
                <blockquote>
                    <div class="message">
                        <p>Each class has different <strong>methods</strong> that can be used on <strong>instances</strong>
                            of that class. If you're not quite sure what an instance is, <a href="http://docs.railsbridgeboston.org/ruby/classes">this page
                                on Ruby classes</a> might
                            help</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>fruits.length
fruits.first
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>You can see all the methods available for an object:</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>fruits.methods
</pre>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>And you can call multiple methods in a row:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>fruits.methods.sort
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>In <code>fruit.methods.sort</code> above, <code>fruit.methods</code> returns an array, and
                            <code>.sort</code> sorts that array. It's exactly like this, but without the <code>array</code>
                            variable:
                        </p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>array = fruits.methods
array.sort
</pre>
                        </div>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Iterating with each</h3>
                <blockquote>
                    <div class="message">
                        <p>Arrays have a method called <strong>each</strong> which iterates through the list running code on each item.</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>fruits.each do |fruit|
  puts fruit
end
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>This takes the first item from the <code>fruits</code> array (<code>"strawberry"</code>),
                            assigns it to the variable <code>fruit</code>, and runs the code between <code>do</code> and
                            <code>end</code>. Then it does the same thing for each other item in the list. The
                            code above should print a list of the fruits.
                        </p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Branching with if statements</h3>
                <blockquote>
                    <div class="message">
                        <p>An <strong>if statement</strong> runs code only when a condition is true.</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>if my_variable &gt; 1
  puts "YAY!"
end
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>In this example, <code>my_variable > 1</code> is the condition being evaluated. This prints <code>YAY!</code> if the value stored in <code>my_variable</code> is greater than 1.</p>
                    </div>
                    <div class="message">
                        <p>Try changing the <code>&gt;</code> in the conditional to a <code>&lt;</code>.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Defining methods</h3>
                <blockquote>
                    <div class="message">
                        <p>You can also make your own methods:</p>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>def pluralize(word)
  word + "s"
end
pluralize("kiwi")
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>Methods take <strong>parameters</strong>, which are the variables they work on. In this case, we made a method called pluralize that takes one parameter, a word.</p>
                    </div>
                    <div class="message">
                        <p>Methods can also return data. In this case, pluralize returns the word with an 's' added to the end of it. In Ruby, methods return whatever the last line of the method evaluates to.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <blockquote>
                    <div class="message">
                        <p>Try defining a method now: try writing a method that takes a number as a parameter and returns twice that number.<br><br>
                            Hints:
                        <ul>
                            <li>You'll need to pick a name for your method so you can define it.</li>
                            <li>To multiply a number by 2, we use the syntax <code>my_variable * 2</code></li>
                        </ul>
                        Now try updating the method to take a second parameter, the amount to multiply the first number by.<br><br>
                        Hints:
                        <ul>
                            <li>You can define a method as taking multiple arguments by separating them with a comma.</li>
                            <li>When you call a method, pass multiple arguments by separating them with a comma.</li>
                        </ul>
                        Our original method always multiplied the input by 2, but adding the second parameter made the method more flexible and useful.
                        </p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
</div>
<h1 class="doc_title">Creating A Rails Application</h1>
<div class="doc">
    <img alt="Screenshot of a Ruby on Rails default home page" class="screenshot" src="img/Start_page.png">
    <div class="goals">
        <h2>Goals</h2>
        <ul>
            <li>
                <div class="message">
                    <p>Create your new application</p>
                </div>
            </li>
        </ul>
        <div class="message">
            <p>Let's get started! By the end of this step, we'll have a brand-new Rails app.</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="message tip vertical-centerer">
                <i class="fa fa-info-circle fa-3x"></i>
                <div class="vertically-centered">
                    <p>If you have <em>any</em> problems, contact a TA immediately.</p>
                </div>
            </div>
            <div class="step">
                <h3>Confirm you're in the terminal</h3>
                <blockquote>
                    <div class="message">
                        <p>Make sure you have exited irb. If you haven't, your screen will say <code>irb(main):001:0&gt;</code>. Leave irb by typing <code>exit</code>.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Create the rails app</h3>
                <blockquote>
                    <div class="console terminal">
                        <div class="message">
                            <p>Type this in the terminal:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>rails new .</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p><code>rails new</code> creates a new Rails project in the specified folder. <em>This may take some time.</em></p>
                    </div>
                    <div class="message">
                        <p>In this case we told it to create a new project in the current folder, denoted by the "." at the end.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>List the directory contents</h3>
                <blockquote>
                    <div class="console terminal">
                        <div class="message">
                            <p>Type this in the terminal:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>ls</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p><code>ls</code> stands for "list (stuff)".</p>
                    </div>
                    <div class="message">
                        <p>It shows you the contents of the current folder.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Review directory contents</h3>
                <blockquote>
                    <div class="message">
                        <p>Let's look at the structure of the whole project.</p>

                        <p>You can see the project directory. This is
                            convenient when you're going to edit several files and want to navigate quickly.</p>

                    </div>
                </blockquote>
            </div>
            <div class="message">
                <p>You can see that <code>rails new</code> created a lot of directories and
                    files. The ones we want to focus on today are:</p>
            </div>
            <table>
                <tr>
                    <th>File/Folder</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td>app/</td>
                    <td>Contains the controllers, models, and views for your application. You will do most of your work here.</td>
                </tr>
                <tr>
                    <td>config/</td>
                    <td>Configure your application's runtime rules, routes, database, and more.</td>
                </tr>
                <tr>
                    <td>db/</td>
                    <td>Shows your current database schema, as well as the database migrations.</td>
                </tr>
                <tr>
                    <td>public/</td>
                    <td>The only folder seen to the world as-is. If you put files in here, they will be served directly without any processing by Rails.</td>
                </tr>
                <tr>
                    <td>app/assets/</td>
                    <td>This is where your images, JavaScript, stylesheets (CSS), and other static files should go. Modern rails apps use something called the Assets Pipeline, which combines all the JavaScript and CSS files in this directory into a single file for speediness.</td>
                </tr>
            </table>
            <div class="message">
                <p>There is a lot more that <code>rails new</code> created. Probably enough to fill a book, so we're going to ignore them for now.</p>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Running Your Application Locally</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <ul>
            <li>
                <div class="message">
                    <p>Let's fire up the application locally</p>
                </div>
            </li>
        </ul>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Start the server</h3>
                <blockquote>
                    <div class="console terminal">
                        <div class="message">
                            <p>Type this in the terminal:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>rails server</pre>
                        </div>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Navigate to your application</h3>
                <blockquote>
                    You should see a notification appear in the bottom right corner of your editor. If it's hidden, click the "bell" icon to bring it back up.<br>
                    Click on the <strong>Open in Browser</strong> button in the notification to navigate to your app. <br>
                    <img alt="Open in browser button" class="screenshot" src="img/open-in-browser.png">
                    <p>You should see your web app actually running! It should look like this:</p>
                    <img alt="Screenshot of a Ruby on Rails default home page" class="screenshot" src="img/Start_page.png">
                </blockquote>
            </div>
            <div class="step">
                <h3>Stop the server</h3>
                <blockquote>
                    <div class="message">
                        <p>When at the terminal where Rails server is running, you can always type <strong>Control-C</strong> to stop it.
                            Try this now by switching back to your codespace, clicking on the terminal window to focus on it, and then typing <strong>Control-C</strong>.</p>
                    </div>
                    <div class="result">
                        <span>Expected result:</span>
                        <pre>^C- Gracefully stopping, waiting for requests to finish
=== puma shutdown: 2023-06-26 19:13:29 +0000 ===
- Goodbye!
Exiting
</pre>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <p><code>rails server</code> ran your application.</p>
            </div>
            <div class="message">
                <p>This provides a very simple means to see your changes before you commit and push them to Github.</p>
            </div>
            <div class="message">
                <p>Control-C is a way of closing or cancelling terminal programs. Since <code>rails server</code> will run forever, you need to interrupt it with Control-C.</p>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Creating A Migration</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>

        <table class="model-diagram">
            <thead>
                <tr>
                    <th>Topics</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>id</td>
                </tr>
                <tr>
                    <td>title</td>
                </tr>
                <tr>
                    <td>description</td>
                </tr>
            </tbody>
        </table>
        <div class="message">
            <p>Our app should have a list of topics that people can vote on. We'll store our topics in the database. In this step you'll do the following:</p>
        </div>
        <ul>
            <li>
                <div class="message">
                    <p>Create a simple <em>Table</em> in the database for topics with a title and a description</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Automatically generate the corresponding <em>Scaffold</em> in Rails (namely, the <em>Model</em>, the <em>View</em>, and the <em>Controller</em>).</p>
                </div>
            </li>
        </ul>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Define your migration</h3>
                <blockquote>
                    <div class="console terminal">
                        <div class="message">
                            <p>Type this in the terminal:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>rails generate scaffold topic title:string description:text</pre>
                        </div>
                    </div>
                    <div class="message">
                        <ul>
                            <li>
                                <code>generate scaffold</code> tells Rails to create everything necessary to get up and running with topics.
                            </li>
                            <li>
                                <code>topic</code> tells Rails the name of the new model.
                            </li>
                            <li>
                                <code>title:string</code> says that topics have a title, which is a "string".
                            </li>
                            <li>
                                <code>description:text</code> says that topics have a description which is a "text". A "text" is like a "string" that might be very long.
                            </li>
                        </ul>
                    </div>
                    <div class="message">
                        <p>If you want, take some time to poke around the files listed in this step. You can learn about them in the <a href="rails_architecture">Rails Architecture</a> page.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Run the migration</h3>
                <blockquote>
                    <div class="console terminal">
                        <div class="message">
                            <p>Type this in the terminal:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>rails db:migrate</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>This tells Rails to update the database to include a table for our new model.</p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <h2>Databases don't create tables by themselves - they need instructions.</h2>
            <div class="message">
                <p>One of the files the scaffold command created will be named something like
                    <code>db/migrate/20170802211140_create_topics.rb</code>. The numbers in the name are
                    the date and time the file was made, so yours will be named differently.
                </p>

                <p>The file contains Ruby code that describes what the table will look like.
                    This is called a migration file. It tells the database how to transform
                    itself into the new configuration.</p>
                <pre class="CodeRay"><span class="keyword">class</span> <span class="class">CreateTopics</span> &lt; <span class="constant">ActiveRecord</span>::<span class="constant">Migration</span>[<span class="float">5.1</span>]
  <span class="keyword">def</span> <span class="function">change</span>
    create_table <span class="symbol">:topics</span> <span class="keyword">do</span> |t|
      t.string <span class="symbol">:title</span>
      t.text <span class="symbol">:description</span>

      t.timestamps
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre>
                <p>See how this lines up with the scaffold command?</p>
                <pre class="CodeRay">rails generate scaffold topic title:string description:text
</pre>
                <p>The migration says to create a table named "topics", with a title column
                    that's a string, and a description column that's text. Rails automatically
                    adds timestamps, and will use it to automatically record when the data was
                    created and updated.</p>
            </div>
            <h2>Rails tasks</h2>
            <div class="message">
                <p><strong>rake</strong> <em>(ruby make)</em> is a tool that allows you to run small Ruby programs (<strong>tasks</strong>) that you use often in your application.</p>

                <p>Here, <code>rails db:migrate</code> uses a Rake task provided by the Rails framework. It uses the migration file we just created (<code>db/migrate/201xxxxxxxxxxx_create_topics.rb</code>) to change the database. Database migration files can be crucial to code collaboration.</p>

            </div>
            <div class="message tip vertical-centerer">
                <i class="fa fa-info-circle fa-3x"></i>
                <div class="vertically-centered">
                    <p>You can run <code>rails -T</code> to see a list of all the Rake tasks your app currently responds to, along with a short description of each task.</p>
                </div>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Rails Architecture</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <ul>
            <li>
                <div class="message">
                    <p>Create a database table for topics with a title and a description</p>
                </div>
            </li>
        </ul>
        <div class="message">
            <p>In this step we'll learn a bit about Rails architecture. By the end of this step you should understand the following concepts:</p>
        </div>
        <ul>
            <li>Table</li>
            <li>Model</li>
            <li>View</li>
            <li>Controller</li>
        </ul>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <h2>Rails architecture and its relation to the database</h2>
            <img alt="MVC" src="img/mvc.png">
            <div class="message">
                <p>Rails implements a very specific notion of the <strong>Model/View/Controller</strong> pattern, which guides how you structure your web applications.</p>
            </div>
            <h3>Model</h3>
            <div class="message">
                <ul>
                    <li>For all the Models we create in RailsBridge, Model objects have a corresponding record in the the database. The name of the table in the database is the plural version of the Model's class name. For example, if the Model is called 'Duck', it will automatically query or write to the 'ducks' table in the database.</li>
                    <li>Methods internal to Rails make it easy to automatically write records to the the database and query the database to get the records again later.</li>
                    <li>The Model is a bridge between the database and your application's code.</li>
                </ul>
            </div>
            <h3>View</h3>
            <div class="message">
                <ul>
                    <li>The View generates the HTML that will be displayed in the browser.</li>
                    <li>View files are written in ERB (which stands for Embedded RuBy), a templating language. It contains HTML with Ruby code embedded in it. The ruby variables in the view stand as placeholders for content that will be filled in when a user requests the page.</li>
                    <li>(There are several other templating languages available, but in RailsBridge we always stick to ERB.)</li>
                </ul>
            </div>
            <h3>Controller</h3>
            <div class="message">
                <ul>
                    <li>Controllers pass Ruby objects between the Models and the Views.</li>
                    <li>Each url corresponds to a specific method in a Controller.</li>
                    <li>After this step, when you visit any page in your application, that request will be handled by a method in a Controller.</li>
                </ul>
            </div>
            <div class="message">
                <p>When Models, Views and Controllers are all put together, they follow a pattern: Given a URL, Rails will look up which Controller method (also called an "Action") to use. The Controller Action will use methods in a corresponding Model. The Model will need to read or write to the database, and return an object containing that data to the Controller. The Controller will take that object and pass it to the View. (Actions normally have a corresponding View file, and Rails will automatically find and use that file.)</p>

                <p>Models, Views and Controllers each have specific jobs. Separating responsibilities like this make it easier to develop, especially as it gets bigger. (When each file has a clear responsibility it's easier to fix problems and add new features.)</p>
            </div>
            <div class="message">
                <p>If you want to learn more about Rails Architecture, you may want to watch this video explanation (3 min 30 sec) <a href="https://www.youtube.com/watch?v=eTdVkgF_Slo">MVC architecture <em>Youtube</em></a></p>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">CRUD With Scaffolding</h1>
<div class="doc">
    <div class="goals -@ -@ -@">
        <h2>Goals</h2>
        <div class="message">
            <p>At the core, most database driven web sites are the same. They need to store records and provide a way to do the following:</p>

            <ul>
                <li>
                    <strong>C</strong>reate new records in the database
                </li>
                <li>
                    <strong>R</strong>ead or show the records in the database
                </li>
                <li>
                    <strong>U</strong>pdate existing records
                </li>
                <li>
                    <strong>D</strong>estroy or delete records
                </li>
            </ul>

            <p>Because these 4 actions (CRUD) are so common, Rails includes the scaffold command to make creating them easier.</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Start the server</h3>
                <blockquote>
                    <div class="console terminal">
                        <div class="message">
                            <p>Type this in the terminal:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>rails server</pre>
                        </div>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Navigate to the app</h3>
                <blockquote>
                    <div class="message">
                        <p>Point your browser to /topics</p>
                    </div>
                    <div class="message">
                        <p>You should see the "Listing Topics" page with headers for title and description, and a link to add a new topic:</p>
                    </div>
                    <img alt="Screenshot of topic list page" class="screenshot" src="img/Seattle_topic_list_page.png">
                </blockquote>
            </div>
            <div class="step">
                <h3>Create your first topic</h3>
                <blockquote>
                    <div class="message">
                        <ul>
                            <li>Click on "New Topic"</li>
                            <li>Fill in the form and click "Create Topic"</li>
                            <li>You should see a page showing your new topic with a message that your topic was successfully created:</li>
                        </ul>
                    </div>
                    <img alt="Screenshot of topic detail page with confirmation message" class="screenshot" src="img/Seattle_topic_created.png">
                </blockquote>
            </div>
            <div class="step">
                <h3>Review the list of topics</h3>
                <blockquote>
                    <div class="message">
                        <ul>
                            <li>Click on "Back"</li>
                            <li>You should see the topic list again, this time with your new topic listed:</li>
                        </ul>

                        <p><img src="img/Seattle_list_with_topic.png" class="screenshot" alt="Screenshot of topic list with new topic"></p>

                        <ul>
                            <li>Try the "show", "edit", and "destroy" links to see what they do</li>
                            <li>You've created a basic database-driven web site. Congratulations!</li>
                        </ul>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <p>How did all those pages get created and hooked together? <code>rails scaffold</code> did it for you.</p>

                <p>Let's take a closer look at some of the files Rails created:</p>

                <ul>
                    <li>
                        <p><code>app/models/topic.rb</code></p>

                        <ul>
                            <li>This file contains code for our topic model. If you look at it,
                                it's nearly blank. Creating, reading, updating, and deleting
                                records are built into Rails.</li>
                        </ul>
                    </li>
                    <li>
                        <p><code>app/views/topics</code></p>

                        <ul>
                            <li>This folder contains all the views for our topics model. This is
                                where the code for the forms you used above is stored. Rails
                                created all of these pages as part of the scaffold.</li>
                            <li>If you've written HTML before, many lines in the views should
                                look familiar. Rails views are HTML with some extra code added
                                to display data from the database.</li>
                        </ul>
                    </li>
                    <li>
                        <p><code>app/views/topics/index.html.erb</code></p>

                        <ul>
                            <li>This is the code for the page that lists all the topics.</li>
                            <li>Index is the name given to the "default" page for a web site or a
                                section of a web site. When you navigate to
                                /topics the topics index page is what is
                                sent to your computer.</li>
                        </ul>
                    </li>
                    <li>
                        <p><code>app/views/topics/show.html.erb</code></p>

                        <ul>
                            <li>This is the page you get when you click the "show" link on the
                                "Listing topics" page.</li>
                        </ul>
                    </li>
                    <li>
                        <p><code>app/views/topics/new.html.erb</code></p>

                        <ul>
                            <li>This is the page you get when you click on "New Topic".</li>
                        </ul>
                    </li>
                    <li>
                        <p><code>app/views/topics/edit.html.erb</code></p>

                        <ul>
                            <li>This is the page you get when you click on "Edit"</li>
                        </ul>
                    </li>
                    <li>
                        <p><code>app/views/topics/_form.html.erb</code></p>

                        <ul>
                            <li>You may have noticed that the page for new topics and the page
                                to edit topics looked similar. That's because they both use the
                                code from this file to show a form. This file is called a
                                partial since it only contains code for part of a page. Partials
                                always have filenames starting with an underscore character.</li>
                        </ul>
                    </li>
                    <li>
                        <p>Challenge question: Can you find the line of code in <code>new.html.erb</code>
                            and <code>edit.html.erb</code> that makes the form partial appear?</p>
                    </li>
                    <li>
                        <p><code>app/controllers/topics_controller.rb</code></p>

                        <ul>
                            <li>This is the controller file that Rails created as part of the scaffold</li>
                            <li>If you look you'll see a method (a line beginning with
                                <code>def</code>) for each of the views listed above (except
                                <code>_form.html.erb</code>)
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Setting The Default Page</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <div class="message">
            <p>Now that the structure is complete, let's make the flow work smoothly.</p>

            <p>Currently when you go to your homepage you see the default Rails message.</p>

            <p>It would be easier to use our app if the homepage went directly to the topics list.</p>

            <p>In this step we'll make that happen and learn a bit about routes in Rails.</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Add a root route</h3>
                <blockquote>
                    <div class="message">
                        <p>Open the file <code>config/routes.rb</code> in an editor.</p>
                    </div>
                    <div class="message">
                        <p>Search the file for the line <code>resources :topics</code>. It will be near the top.</p>
                    </div>
                    <div class="message">
                        <p>Right above that line, add a new line: <code>root 'topics#index'</code>. When you are done the file should look like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="constant">Rails</span>.application.routes.draw <span class="keyword">do</span>
  root <span class="string"><span class="delimiter">'</span><span class="content">topics#index</span><span class="delimiter">'</span></span>
  resources <span class="symbol">:topics</span>
  <span class="comment"># For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html</span>
<span class="keyword">end</span>
</pre>
                </blockquote>
            </div>
            <div class="step">
                <h3>Remove the comment</h3>
                <blockquote>
                    <div class="message">
                        <p>Near the bottom, there is a line that starts with a <code>#</code>. This is called a
                            comment. It is ignored by ruby and is used for reference or further
                            explanation of nearby code. If you want, you can remove it, or keep it
                            there to look at later. It's totally up to you!</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Confirm your changes</h3>
                <blockquote>
                    <div class="message">
                        <p>Go back to your homepage. You should be taken to the topics list automatically.</p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <ul>
                    <li>
                        <code>root 'topics#index'</code> is a Rails route that says the default
                        address for your site is <code>topics#index</code>. <code>topics#index</code> is the topics
                        list page (the topics controller with the index action).
                    </li>
                    <li>Rails routes control how URLs (web addresses) get matched with
                        code on the server. Similar to how addresses match with houses and
                        apartments.</li>
                    <li>The file <code>config/routes.rb</code> is like an address directory listing the
                        possible addresses and which code goes with each one.</li>
                    <li>
                        <code>routes.rb</code> uses some shortcuts so it doesn't always show all the
                        possible URLs. To explore the URLs in more detail we can use the
                        terminal.
                    </li>
                </ul>

                <p>At the terminal type <code>rails routes</code>. You should get something that
                    looks like this:</p>
            </div>
            <div class="console terminal">
                <div class="message"></div>
                <div class="wrapper">
                    <span class="label">Terminal</span>
                    <pre>$ rails routes

    Prefix Verb   URI Pattern                Controller#Action
      root GET    /                          topics#index
    topics GET    /topics(.:format)          topics#index
           POST   /topics(.:format)          topics#create
 new_topic GET    /topics/new(.:format)      topics#new
edit_topic GET    /topics/:id/edit(.:format) topics#edit
     topic GET    /topics/:id(.:format)      topics#show
           PATCH  /topics/:id(.:format)      topics#update
           PUT    /topics/:id(.:format)      topics#update
           DELETE /topics/:id(.:format)      topics#destroy
</pre>
                </div>
            </div>
            <div class="message">
                <p>This shows all the URLs your application responds to. The code that starts
                    with colons are variables so <code>:id</code> means the id number of the record. The
                    code in parentheses is optional.</p>

                <p>You can also get this information on your site in development. Go to
                    <code>/rails/info/routes</code>
                </p>
            </div>
            <div class="step">
                <h3>Exploring Routes (optional)</h3>
                <blockquote>
                    <div class="message">
                        <p>Now you can have a look at the paths that are available in your app.
                            Let's try looking at one of the topics routes we just generated.
                            Open up your rails console and play:</p>
                    </div>
                    <div class="console terminal">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>$ rails console</pre>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message"></div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>&gt; app.topics_path
=&gt; "/topics"
&gt; app.topics_url
=&gt; "http://www.example.com/topics"
</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p><code>app</code> is a special object that represents your entire application.
                            You can ask it about its routes (as we just did), play with its
                            database connections, or make pseudo-web requests against it with
                            <code>get</code> or <code>post</code> (and lots more).
                        </p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Voting On Topics</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <ul>
            <li>
                <div class="message">
                    <p>Create a model for votes</p>
                </div>
            </li>
        </ul>
        <table class="model-diagram">
            <thead>
                <tr>
                    <th>Votes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>id</td>
                </tr>
                <tr>
                    <td>topic_id</td>
                </tr>
            </tbody>
        </table>
        <div class="message">
            <p>Every topic can be voted on. In order to count votes, we need to record votes. We'll add that table now.</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="console terminal">
                <div class="message">
                    <p>Type this in the terminal:</p>
                </div>
                <div class="wrapper">
                    <span class="label">Terminal</span>
                    <pre>rails generate model vote topic_id:integer
rails db:migrate
</pre>
                </div>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <ul>
                    <li>Just like before, we're creating a new model named "vote".</li>
                    <li>The only thing really different is the integer we added called <code>topic_id</code>.

                        <ul>
                            <li>
                                <code>topic_id</code> is the data we need to draw the line between votes and topics.
                            </li>
                        </ul>
                    </li>
                    <li>We didn't generate a full scaffold this time because we aren't
                        going to do the full CRUD for votes; they're just going to be
                        considered part of topics as-is.</li>
                </ul>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Hooking Up Votes And Topics</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <div>
            <table class="model-diagram" style="display:inline-block">
                <thead>
                    <tr>
                        <th>Topics</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>id</td>
                    </tr>
                    <tr>
                        <td>title</td>
                    </tr>
                    <tr>
                        <td>description</td>
                    </tr>
                </tbody>
            </table>
            <div style="position: relative; width: 60px; height: 100px;display:inline-block">
                <div class="arrow-left" style="left: 0;  top: 30px;"></div>
                <div class="horiz-line" style="left: 5px;  top: 37px; width: 25px;"></div>
                <div class="vert-line" style="left: 30px; top: 38px; height: 25px;"></div>
                <div class="horiz-line" style="right: 0; top: 62px; width: 30px;"></div>
            </div>
            <table class="model-diagram" style="display:inline-block">
                <thead>
                    <tr>
                        <th>Votes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>id</td>
                    </tr>
                    <tr>
                        <td>topic_id</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="message">
            <p>Because there is an explicit relationship between a topic and its
                votes, we need to specify that. In this step, we'll explicitly
                declare the relationship between votes and topics.</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Teach the Topic model about Votes</h3>
                <blockquote>
                    <div class="message">
                        <p>Edit <code>app/models/topic.rb</code> so that it looks like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="keyword">class</span> <span class="class">Topic</span> &lt; <span class="constant">ApplicationRecord</span>
  has_many <span class="symbol">:votes</span>, <span class="key">dependent</span>: <span class="symbol">:destroy</span>
<span class="keyword">end</span>
</pre>
                </blockquote>
            </div>
            <div class="step">
                <h3>Teach the Vote model about Topics</h3>
                <blockquote>
                    <div class="message">
                        <p>Edit <code>app/models/vote.rb</code> so that it looks like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="keyword">class</span> <span class="class">Vote</span> &lt; <span class="constant">ApplicationRecord</span>
  belongs_to <span class="symbol">:topic</span>
<span class="keyword">end</span>
</pre>
                </blockquote>
            </div>
            <div class="step">
                <h3>Play around with Topics and Votes in the Rails console</h3>
                <blockquote>
                    <div class="message">
                        <p>First, make sure you've made at least one topic on the site.</p>
                    </div>
                    <div class="console terminal">
                        <div class="message">
                            <p>Next, open a Rails console in a terminal window:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">Terminal</span>
                            <pre>rails console</pre>
                        </div>
                    </div>
                    <div class="result">
                        <span>Expected result:</span>
                        <pre>$ rails console
Running via Spring preloader in process 1234
Loading development environment (Rails 5.1.2)
irb(main):001:0&gt;
</pre>
                    </div>
                    <div class="message tip vertical-centerer">
                        <i class="fa fa-info-circle fa-3x"></i>
                        <div class="vertically-centered">
                            <p>To get out of the console, type <code>exit</code>.</p>
                        </div>
                    </div>
                    <div class="message">
                        <p>At the console, try the following things</p>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>See how many topics exist:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>Topic.count</pre>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>Save the first topic into a variable:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_topic = Topic.first</pre>
                        </div>
                    </div>
                    <div class="message tip vertical-centerer">
                        <i class="fa fa-info-circle fa-3x"></i>
                        <div class="vertically-centered">
                            <p><code>my_topic</code> here could have been any variable name, but we'll stick with <code>my_topic</code> for consistency.</p>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>Change the title of that topic to something else:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_topic.update(title: 'Edited in the console')</pre>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>Add a vote to that topic:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_topic.votes.create</pre>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>See how many votes that topic has:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_topic.votes.count</pre>
                        </div>
                    </div>
                    <div class="console irb">
                        <div class="message">
                            <p>Remove a vote from that topic:</p>
                        </div>
                        <div class="wrapper">
                            <span class="label">IRB</span>
                            <pre>my_topic.votes.first.destroy</pre>
                        </div>
                    </div>
                    <div class="message">
                        <p>Note that the things you can do to <strong>Model classes</strong> (like <strong>Topic</strong> and <strong>Vote</strong>), differ from the things you can do to <strong>Model instances</strong> (like <code>my_topic</code>, here). <code>my_topic.votes</code> is an <strong>association</strong>, and here behaves mostly like a model class.</p>
                    </div>
                    <div>
                        <div class="half-width">
                            <strong>Model class / association methods</strong>
                            <ul class="no-style-type">
                                <li>Topic.first</li>
                                <li>Topic.last</li>
                                <li>Topic.all</li>
                                <li>Topic.count</li>
                                <li>Topic.find_by_id(5)</li>
                                <li>Topic.destroy_all</li>
                                <li>my_topic.votes.count</li>
                                <li>my_topic.votes.create</li>
                                <li>my_topic.votes.destroy_all</li>
                            </ul>
                        </div>
                        <div class="half-width">
                            <strong>Model instance methods</strong>
                            <ul class="no-style-type">
                                <li>my_topic.title</li>
                                <li>my_topic.title = 'New title'</li>
                                <li>my_topic.update(title: 'New title')</li>
                                <li>my_topic.save</li>
                                <li>my_topic.save!</li>
                                <li>my_topic.destroy</li>
                                <li>my_topic.votes.first.destroy</li>
                            </ul>
                        </div>
                    </div>
                    <div class="message">
                        <p>An exhaustive list of things you can do to models and associations can be found in the <a href="http://guides.rubyonrails.org/active_record_querying.html">Active Record Query Interface RailsGuide</a>.</p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <p><code>has_many</code> and <code>belongs_to</code>:</p>

                <ul>
                    <li>In Rails, relationships between models are called associations.</li>
                    <li>Associations (usually) come in pairs.</li>
                    <li>A topic will have many votes so we put <code>has_many :votes</code> in the
                        topic model.

                        <ul>
                            <li>When you ask a topic for its votes, you get an array of votes
                                for that topic.</li>
                        </ul>
                    </li>
                    <li>A vote is for a particular topic, so we put <code>belongs_to :topic</code>
                        in the vote model.

                        <ul>
                            <li>When you ask a vote for its topic, you get the topic for that
                                vote.</li>
                        </ul>
                    </li>
                </ul>

                <p>It can still be important to clean up after yourself! <code>dependent: :destroy</code>
                    on <code>has_many :votes</code> means when a <strong>Topic</strong> gets destroyed, all
                    the <strong>votes</strong> that correspond to it will be destroyed, too. Without
                    <code>dependent: :destroy</code>, those votes would live on the database forever.
                </p>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Allow People To Vote</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <div class="message">
            <p>Now we're going to add a button people can click to cast a vote.</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Add a new controller action for voting</h3>
                <blockquote>
                    <div class="message">
                        <p>Edit <code>app/controllers/topics_controller.rb</code> and add this method at the end of the controller, above the <code>private</code> keyword:</p>
                    </div>
                    <pre class="CodeRay"><span class="keyword">def</span> <span class="function">upvote</span>
  <span class="instance-variable">@topic</span> = <span class="constant">Topic</span>.find(params[<span class="symbol">:id</span>])
  <span class="instance-variable">@topic</span>.votes.create
  redirect_to(topics_path)
<span class="keyword">end</span>
</pre>
                    <div class="message">
                        <ul>
                            <li>
                                <code>@topic = Topic.find(params[:id])</code> finds the topic in the database with that id and stores it in the variable <code>@topic</code>.
                            </li>
                            <li>
                                <code>@topic.votes.create</code> creates a new vote for the current topic and saves it in the database.
                            </li>
                            <li>
                                <code>redirect_to(topics_path)</code> tells the browser to go back to <code>topics_path</code> (the topics list).
                            </li>
                        </ul>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Add a new route for voting</h3>
                <blockquote>
                    <div class="message">
                        <p>Open <code>config/routes.rb</code> and find the section that looks like this:</p>
                    </div>
                    <pre class="CodeRay">resources <span class="symbol">:topics</span>
</pre>
                    <div class="message">
                        <p>Replace that line so it looks like this:</p>
                    </div>
                    <pre class="CodeRay">resources <span class="symbol">:topics</span> <span class="keyword">do</span>
  member <span class="keyword">do</span>
    post <span class="string"><span class="delimiter">'</span><span class="content">upvote</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre>
                    <div class="message">
                        <p>Verify that upvote route was added successfully by checking the output of <code>rails routes</code>. You should see a line that looks like this:</p>
                        <pre class="CodeRay">      Prefix Verb   URI Pattern                  Controller#Action
upvote_topic POST   /topics/:id/upvote(.:format) topics#upvote
</pre>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Add the button to the view</h3>
                <blockquote>
                    <div class="message">
                        <p>Edit <code>app/views/topics/index.html.erb</code> so that the bottom loop looks like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@topics</span>.each <span class="keyword">do</span> |topic| <span class="inline-delimiter">%&gt;</span></span>
  <span class="tag">&lt;tr&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> topic.title <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> topic.description <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> pluralize(topic.votes.count, <span class="string"><span class="delimiter">"</span><span class="content">vote</span><span class="delimiter">"</span></span>) <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> button_to <span class="string"><span class="delimiter">'</span><span class="content">+1</span><span class="delimiter">'</span></span>, upvote_topic_path(topic), <span class="key">method</span>: <span class="symbol">:post</span> <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Show</span><span class="delimiter">'</span></span>, topic <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Edit</span><span class="delimiter">'</span></span>, edit_topic_path(topic) <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">'</span><span class="content">Destroy</span><span class="delimiter">'</span></span>, topic, <span class="key">method</span>: <span class="symbol">:delete</span>, <span class="key">data</span>: { <span class="key">confirm</span>: <span class="string"><span class="delimiter">'</span><span class="content">Are you sure?</span><span class="delimiter">'</span></span> } <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;/tr&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
</pre>
                    <div class="message">
                        <ul>
                            <li>
                                <code>pluralize(topic.votes.count, "vote")</code> displays the number of votes the topic has, plus the word "vote" or "votes" accordingly.
                            </li>
                            <li>
                                <code>button_to '+1'</code> creates an HTML button with the text "+1".
                            </li>
                            <li>
                                <code>upvote_topic_path(topic)</code> creates the appropriate URL for the action we want to invoke. In this case, we want to upvote the current topic.

                                <ul>
                                    <li>
                                        <code>upvote_topic_path(topic)</code> would return <code>/topics/42/upvote</code> (if topic.id was 42)
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <code>method: :post</code> ensures we do the create action of CRUD, not the read action.
                            </li>
                        </ul>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Confirm your changes in the browser</h3>
                <blockquote>
                    <div class="message">
                        <p>Go back to /topics and play.</p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="deploying">
        <h1>Deploying</h1>
        <blockquote>
            <div class="message">
                <p>Before the next step, you could try deploying your app to Heroku!</p>

                <ul>
                    <li>If you have already deployed your app to Heroku, go on to <a href="deploying_to_heroku_again">Deploying to Heroku again</a>.</li>
                    <li>If this is your first time deploying your app, start at <a href="deploying_to_heroku">Deploying to Heroku</a>
                    </li>
                </ul>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Redirect To The Topics List After Creating A New Topic</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>

        <div class="message">
            <p>When a user creates a new topic, or edits an existing topic, they are
                currently shown a page with just that topic. For our voting app it makes
                more sense that they would be taken back to the topic list.</p>

            <p>In this step we'll change the flow of our app so that the user is taken back to the topics list after they add a new topic (create) or
                edit an existing topic (update).</p>
        </div>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Change the topics controller</h3>
                <blockquote>
                    <div class="message">
                        <p>Open <code>app/controllers/topics_controller.rb</code> and look at the create method. </p>
                    </div>
                    <div class="message">
                        <p>Find the line:</p>
                    </div>
                    <pre class="CodeRay">format.html { redirect_to <span class="instance-variable">@topic</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Topic was successfully created.</span><span class="delimiter">'</span></span> }</pre>
                    <div class="message">
                        <p>and change <code>@topic</code> to <code>topics_path</code> like this:</p>
                    </div>
                    <pre class="CodeRay">format.html { redirect_to topics_path, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Topic was successfully created.</span><span class="delimiter">'</span></span> }</pre>
                    <div class="message">
                        <p>so that the method looks like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="keyword">def</span> <span class="function">create</span>
  <span class="instance-variable">@topic</span> = <span class="constant">Topic</span>.new(topic_params)

  respond_to <span class="keyword">do</span> |format|
    <span class="keyword">if</span> <span class="instance-variable">@topic</span>.save
      format.html { redirect_to topics_path, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Topic was successfully created.</span><span class="delimiter">'</span></span> }
      format.json { render <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">show</span><span class="delimiter">'</span></span>, <span class="key">status</span>: <span class="symbol">:created</span>, <span class="key">location</span>: <span class="instance-variable">@topic</span> }
    <span class="keyword">else</span>
      format.html { render <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">new</span><span class="delimiter">'</span></span> }
      format.json { render <span class="key">json</span>: <span class="instance-variable">@topic</span>.errors, <span class="key">status</span>: <span class="symbol">:unprocessable_entity</span> }
    <span class="keyword">end</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre>
                    <div class="message">
                        <p>In the same file, locate the update method. </p>
                    </div>
                    <div class="message">
                        <p>Find the line:</p>
                    </div>
                    <pre class="CodeRay">format.html { redirect_to <span class="instance-variable">@topic</span>, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Topic was successfully updated.</span><span class="delimiter">'</span></span> }</pre>
                    <div class="message">
                        <p>and change <code>@topic</code> to <code>topics_path</code> like before:</p>
                    </div>
                    <pre class="CodeRay">format.html { redirect_to topics_path, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Topic was successfully updated.</span><span class="delimiter">'</span></span> }</pre>
                </blockquote>
            </div>
            <div class="step">
                <h3>Confirm your changes</h3>
                <blockquote>
                    <div class="message">
                        <p>Create some new topics at /topics. Notice when you create a new topic, the application takes you back to the index page with all the topics.</p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <p>Let's look at the following code snippet, piece by piece:</p>
                <pre class="CodeRay">format.html { redirect_to topics_path, <span class="key">notice</span>: <span class="string"><span class="delimiter">'</span><span class="content">Topic was successfully created.</span><span class="delimiter">'</span></span> }
</pre>
                <ul>
                    <li>
                        <code>format.html</code> means that the server should send html back to the browser
                    </li>
                    <li>
                        <code>redirect_to topics_path</code> means show the <strong>topics list page</strong> when we're done creating or updating a topic
                    </li>
                    <li>
                        <code>notice: 'Topic was successfully created/updated.'</code> puts the message into the flash so it will be displayed on the topics list. You can see the flash message at the very top of <code>app/views/topics/index.html.erb</code>
                    </li>
                </ul>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Make The Topic Title A Link</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>
        <div class="message">
            <p>Your friends recommended two changes for the site:</p>
        </div>
        <ul>
            <li>
                <div class="message">
                    <p>Don't show the description on the list page</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Make the title a link and when it's clicked show the description</p>
                </div>
            </li>
        </ul>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Remove the description</h3>
                <blockquote>
                    <div class="message">
                        <p>Let's start by removing the description. Open <code>app/views/topics/index.html.erb</code> and delete the line that looks like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> topic.description <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span></pre>
                    <div class="message">
                        <p>Also delete the line that looks like this:</p>
                    </div>
                    <pre class="CodeRay"><span class="tag">&lt;th&gt;</span>Description<span class="tag">&lt;/th&gt;</span></pre>
                    <div class="message">
                        <p>If you save and try to load it in the browser you should see that the description no longer appears.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Make the title a link</h3>
                <blockquote>
                    <div class="message">
                        <p>Now make the title a link by editing <code>app/views/topics/index.html.erb</code> (again) and replacing this line:</p>
                    </div>
                    <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> topic.title <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span></pre>
                    <div class="message">
                        <p>with this:</p>
                    </div>
                    <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to topic.title, topic_path(topic) <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span></pre>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> topic.description <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span></pre>
            <div class="message">
                <p>This line was getting the description using .description and just printing it out.</p>
            </div>
            <pre class="CodeRay"><span class="tag">&lt;th&gt;</span>Description<span class="tag">&lt;/th&gt;</span></pre>
            <div class="message">
                <p><code>&lt;th&gt;</code> stands for table header and everything between <code>&lt;th&gt;</code> and
                    <code>&lt;/th&gt;</code> was being printed as a table header (bold). We removed it
                    since we removed the description and it would look funny to have the
                    header and the wrong thing below it.
                </p>
            </div>
            <hr>
            <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to topic.title, topic_path(topic) <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span></pre>
            <div class="message">
                <p>Here's another use of <code>link_to</code> to create a link on the page. This
                    <code>link_to</code> creates a link using the text from the topic title and goes
                    to the topics#show page.
                </p>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Clean Up Links On The Topics List</h1>
<div class="doc">
    <div class="goals">
        <h2>Goals</h2>

        <div class="message">
            <p>Our app is nearly done! The main topics listing page is pretty busy. There are a lot of links that aren't necessary.</p>
        </div>
        <div class="message">
            <p>Let's clean up the topics list page by doing the following:</p>
        </div>

        <ul>
            <li>
                <div class="message">
                    <p>Removing the "show" link</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Removing the "edit" link</p>
                </div>
            </li>
            <li>
                <div class="message">
                    <p>Changing "destroy" to "delete"</p>
                </div>
            </li>
        </ul>
    </div>
    <div class="steps">
        <h2>Steps</h2>
        <blockquote>
            <div class="step">
                <h3>Remove the "show" and "edit" links</h3>
                <blockquote>
                    <div class="message">
                        <p>Open <code>app/views/topics/index.html.erb</code> and remove these two lines:</p>
                    </div>
                    <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Show</span><span class="delimiter">"</span></span>, topic <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
<span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Edit</span><span class="delimiter">"</span></span>, edit_topic_path(topic) <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span>
</pre>
                </blockquote>
            </div>
            <div class="step">
                <h3>Change "destroy" to "delete"</h3>
                <blockquote>
                    <div class="message">
                        <p>Change the line with the word "Destroy" to this:</p>
                    </div>
                    <pre class="CodeRay"><span class="tag">&lt;td&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> link_to <span class="string"><span class="delimiter">"</span><span class="content">Delete</span><span class="delimiter">"</span></span>, topic, <span class="key">method</span>: <span class="symbol">:delete</span>, <span class="key">data</span>: { <span class="key">confirm</span>: <span class="string"><span class="delimiter">"</span><span class="content">Are you sure?</span><span class="delimiter">"</span></span> } <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/td&gt;</span></pre>
                </blockquote>
            </div>
            <div class="step">
                <h3>Confirm your changes</h3>
                <blockquote>
                    <div class="message">
                        <p>Now save your file and try reloading in your browser to see the changes.</p>
                    </div>
                </blockquote>
            </div>
            <div class="step">
                <h3>Add some style!</h3>
                <blockquote>
                    <div class="message">
                        <p>Give your new website a personal touch by styling it and adding an image.</p>

                        <p>Your Rails application loads a CSS stylesheet from the file <code>app/assets/stylesheets/scaffolds.scss</code>. Open this file in your text editor.</p>

                        <p>If you have web design skills already, you can go to town. If not, let's make a simple font change.</p>

                        <p>Change the body's <code>font-family</code> on lines 5 and 11 to <code>serif</code>:</p>
                        <pre class="CodeRay">font-family: serif;
</pre>
                        <p>Reload your browser to see your web pages styled in a different font.</p>

                        <p>Let's add an image to the layout. Open <code>app/views/layouts/application.html.erb</code> in your text editor.</p>

                        <p>Right after the opening <code>&lt;body&gt;</code> tag, let's add an image:</p>
                        <pre class="CodeRay">&lt;img src="http://i.imgur.com/MQHYB.jpg"/&gt;
</pre>
                        <p>Reload your browser. You should see an image!</p>

                        <p>You can choose another image from the web and change the <code>src</code> attribute value. If the image is too big, you can resize it like this:</p>
                        <pre class="CodeRay">&lt;img src="http://i.imgur.com/MQHYB.jpg" height="100" /&gt;
</pre>
                        <p>The <code>height="100"</code> ensures that the image is 100 pixels tall, and no more.</p>
                    </div>
                </blockquote>
            </div>
        </blockquote>
    </div>
    <div class="explanation">
        <h2>Explanation</h2>
        <blockquote>
            <div class="message">
                <ul>
                    <li>
                        <p>The two links we removed were show and edit. We did this because the title now links to the show page and from the show page you can reach the edit page.</p>
                    </li>
                    <li>
                        <p>The second change we made was to make the link text 'Delete' instead of destroy.</p>
                    </li>
                </ul>
            </div>
        </blockquote>
    </div>
</div>

<h1 class="doc_title">Credits And Next Steps</h1>
<div class="doc">
    <div class="message">
        <p>Guess what? <em><strong>You're done!!!</strong></em> Congratulations, you just "finished" your first rails app!</p>

        <p>(They're never <em>really</em> ever finished... have fun tweaking it!)</p>

        <h1>Extra Credit</h1>

        <p>If you got all the way through with some time to spare, here's some extra stuff you can try:</p>

        <ul>
            <li>Put your web application online by <a href="http://docs.railsbridgeboston.org/intro-to-rails/deploying_to_heroku">deploying to heroku</a>.</li>
            <li>Add a downvote button that does the opposite of what the upvote button does</li>
            <li>Sort topics by their number of votes</li>
            <li>Add an 'about' page, linked from the bottom of the topics list. Link back to the Topics list from the About page so users don't get stranded.</li>
            <li>If your class has a <strong>lot</strong> of time left over:

                <ul>
                    <li>Users should be allowed to vote only once: give votes a user_id and allow a user to have voted on each topic only once. But wait, what is a 'user' in our system? Get a volunteer to introduce everyone to <a href="https://github.com/plataformatec/devise">Devise</a>, a simple way to add authentication to a Rails application.</li>
                    <li>Users should be able to give a post a 'negative' vote instead of a positive one. How might you represent that in this system?</li>
                </ul>
            </li>
        </ul>
    </div>
    <h1>Authors</h1>
    <ul>
        <li>Sarah Allen</li>
        <li>Sarah Mei</li>
        <li>Alex Chaffee</li>
        <li>Ryan Davis</li>
        <li>Steven! Ragnarok</li>
        <li>...and many, many others</li>
    </ul>
    <h1>What next?</h1>
    <ul>
        <li>Probably time for the closing presentation.</li>
        <li>After that, start a project, tutorial, and come back again!</li>
        <li>
            <span>All our favorite resources can be found on the RailsBridge site: </span><a href="http://www.railsbridgeboston.org/pages/resources">http://www.railsbridgeboston.org/pages/resources</a>
        </li>
    </ul>
</div>
